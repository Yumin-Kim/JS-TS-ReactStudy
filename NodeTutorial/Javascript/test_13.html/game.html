<!DOCTYPE html>
<html>
<head>
	<title>가위 바위 보_201610670_박추민</title>
	<meta charset="utf-8">
	<style type="text/css">
		.coinBox{
			display: inline-block;
			width: 30%;
			text-align: center;
			line-height: 100px;
			font-size: 30px;
			border:solid 1px #ccc;
			margin: 10px 0;
		}
		#stopBtn{
			width: 100px;
			height: 100px;
			background:#f00;
			border-radius: 150px;
			border:solid 3px #000;
			font-size: 30px;
			margin: 0 auto;
			display: block;
		}
		.checkCoin{
			width: 50%;
			margin: 10px auto;
			font-size: 20px;
			text-align: center;
			padding:20px;
			background:#efefef;

		}
		#txtBox{
			height: 50px;
			margin: 10px;
			font-size: 20px;
			background:#000;
			color:#fff;
			padding:10px;
		}
	</style>
</head>
<body>   
	<div style="width: 380px; margin:100px auto; border:solid 3px #efefef">
		<div style="text-align: center;" div="rulletBox">
			<div class="coinBox">1</div>
			<div class="coinBox">2</div>
			<div class="coinBox">3</div>
		</div>
		<div id="txtBox" style="text-align: center;">아래 가위/바위/보 버튼을 클릭하면<br>게임이 시작됩니다. </div>

		<div id="machine" style="text-align: center;">
			<img src="img/scissor.png" alt="가위" width="300px">
		</div>
		<div style="text-align: center;">
			<button class="btns" onclick="game(1)"><img src="img/scissor.png" alt="가위" width="100px"></button>
			<button class="btns" onclick="game(0)"><img src="img/rock.png" alt="바위" width="100px"></button>
			<button class="btns" onclick="game(2)"><img src="img/paper.png" alt="보" width="100px"></button>
		</div>
		<div class="checkCoin">현재 코인 : <span id="txt_coin">3</span></div>
	</div>
	<script type="text/javascript">

	// 1. 가위,바위,보 버튼을 클릭하면 게임시작
	// 2. #machine 요소에 있는 가위,바위,보 이미지가 랜덤으로 바뀐다.
	// 3. 이겼을 경우 #txtBox 요소의 글자가 바뀐다. (이겼을 경우 : 이겼습니다, 졌을경우 : 졌습니다, 비겼을 경우 : 비겼습니다. 다시하기)
	// 4_1. 이겼을 경우 #rulletBox 요소의 .coinBox가 랜덤으로 돌다가 멈춘다. 멈춘 코인의 점수만큼 .checkCoin의 값에서 추가 된다.
	// 4_2. 졌을 경우 .checkCoin에서 1코인씩 감점이 된다. (비기면 코인 변경 없음.)
	// 5. 코인이 0일때는 #txtBox 요소에 "코인이 모자랍니다." 출력.
    
    var coin = 3; // 현재 코인 값
   
	function game(me){
		if(coin > 0){
		var machine = Math.floor(Math.random()*3);
		//console.log(machine);

		if(machine == 0){
			document.getElementById("machine").innerHTML = '<img src="img/rock.png" alt="바위" width="300px">';
		}else if(machine == 1){
			document.getElementById("machine").innerHTML = '<img src="img/scissor.png" alt="가위" width="300px">';
		}else if(machine == 2){
			document.getElementById("machine").innerHTML = '<img src="img/paper.png" alt="보" width="300px">';
		}

		var result = compare(me,machine);
		//console.log(result);
		if(result =="me"){
			//이겻을때
			document.getElementById("txtBox").innerHTML = '이겼습니다.';
			rullet(); // 룰렛실행//
		}else if(result == "machine"){
			//졋을때
			document.getElementById("txtBox").innerHTML = '졌습니다.';
			coin = coin - 3;
            document.getElementById("txt_coin").innerHTML = coin;
		}else if(result == "same"){
			//비겻을때
			document.getElementById("txtBox").innerHTML = '비겼습니다.<br>다시하기';
		}
	  }else{
	  	//document.getElementById("txtBox").innerHTML = '코인이 모자랍니다.';
	  	alert('코인이 모자랍니다.')
	  }	
   }
	/*
	
	0 : 묵
	1 : 찌
	2 : 빠

	나		머신
	0		 0		---> 비김
	0		 1		---> 이김
	0		 2		---> 짐

	1		 0		---> 짐
	1		 1		---> 비김
	1		 2		---> 이김

	2		 0		---> 이김
	2		 1		---> 짐
	2		 2		---> 비김

	*/

	function compare(me,mac){
		if(me == 0){
			if(mac == 0){
				return "same";
			}else if(mac == 1){
				return "me";	
			}else if(mac == 2){
				return "machine";	
			}
			
		}else if(me == 1){
			if(mac == 0){
				return "machine";
			}else if(mac == 1){
				return "same";	
			}else if(mac == 2){
				return "me";	
			}

		}else if(me == 2){
			if(mac == 0){
				return "me";
			}else if(mac == 1){
				return "machine";	
			}else if(mac == 2){
				return "same";	
			}
		}				
	}

	//룰렛
		function rullet(){
		var act = 0;
		for(var i=0; i<3; i++){
			// 가위 바위 보 비활성화
            document.getElementsByClassName("btns")[i].disabled = 'disabled';
        }
		var setTime = setInterval(function(){
			//반복될 코드
			if(act > 2){
				act = 0;
			}
			for(var i=0; i<3; i++){
				if(act == i){
					document.getElementsByClassName("coinBox")[i].style.backgroundColor = "#f00";
				}else{
					document.getElementsByClassName("coinBox")[i].style.backgroundColor = "#fff";
				}
			}
			act++;
		},100)

        var outTime = Math.floor(Math.random()*3000+500);
		setTimeout(function(){
			//지정된 밀리초에 실행 될 코드(한번만 실행됨)
			//룰렛 멈추기
            clearInterval(setTime);
            //코인 추가
            coin = coin + act;
            document.getElementById("txt_coin").innerHTML = coin;
            // 가위바위보 버튼 비활성화 -> 활성화로 변경
            for(var i=0; i<3; i++){
            document.getElementsByClassName("btns")[i].disabled = false;
        }
		},outTime)
	}


	</script>
</body>
</html>